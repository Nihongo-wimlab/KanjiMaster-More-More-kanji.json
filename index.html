
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KanjiMaster – More & More</title>

    <!-- React + Babel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>

    <!-- JOUW DATA-BESTAND -->
    <script src="kanji-data.js"></script>

    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: sans-serif;
            background: #f1f5f9;
        }

        .app {
            min-height: 100vh;
            background: #f1f5f9;
            padding: 24px 16px;
        }

        .wrap {
            max-width: 1100px;
            margin: 0 auto;
        }

        .hbox {
            background: white;
            border-radius: 28px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid #e2e8f0;
        }

        .row {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .sbox {
            flex: 1;
            min-width: 180px;
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 14px;
            padding: 10px 14px;
        }

        .sbox input {
            background: transparent;
            border: none;
            outline: none;
            font-weight: 700;
            color: #334155;
            font-size: 13px;
            width: 100%;
            font-family: inherit;
        }

        .fgrp {
            display: flex;
            background: #f1f5f9;
            border-radius: 14px;
            padding: 4px;
            gap: 2px;
        }

        .fbtn {
            flex: 1;
            padding: 8px 14px;
            font-size: 9px;
            font-weight: 900;
            text-transform: uppercase;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            background: transparent;
            color: #94a3b8;
            white-space: nowrap;
            font-family: inherit;
        }

        .f-all {
            background: white !important;
            color: #1e293b !important;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        }

        .f-on {
            background: #fddf47 !important;
            color: #78350f !important;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        }

        .f-kun {
            background: #ef4444 !important;
            color: white !important;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px,1fr));
            gap: 24px;
        }

        .card-wrap {
            perspective: 2000px;
            cursor: pointer;
            height: 420px;
            position: relative;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4,0,0.2,1);
        }

        .card-inner.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            inset: 0;
            backface-visibility: hidden;
            border-radius: 28px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            padding: 22px;
        }

        .on-bg {
            background: #fddf47;
            border: 8px solid rgba(255,255,255,0.3);
            box-shadow: 0 8px 32px rgba(0,0,0,0.13);
        }

        .kun-bg {
            background: #ef4444;
            border: 8px solid rgba(255,255,255,0.3);
            box-shadow: 0 8px 32px rgba(0,0,0,0.13);
        }

        .card-back {
            transform: rotateY(180deg);
        }

        .badge {
            border-radius: 99px;
            padding: 4px 12px;
            font-size: 9px;
            font-weight: 900;
            text-transform: uppercase;
        }

        .addbtn {
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 14px;
            padding: 11px 20px;
            font-weight: 900;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            font-family: inherit;
        }

        .addbtn:hover {
            background: #4338ca;
        }
    </style>
</head>

<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useMemo } = React;

        // DATA komt uit kanji-data.js
        // DATA is nu een globale variabele

        const EMPTY = {
            id: "",
            kanji: "",
            meaning: "",
            readings: "",
            type: "on",
            combination: "",
            combReading: "",
            combMeaning: "",
            sentence: "",
            romaji: "",
            translation: ""
        };

        function App() {
            const [db, setDb]           = useState(DATA);
            const [flipped, setFlipped] = useState([]);
            const [search, setSearch]   = useState("");
            const [filter, setFilter]   = useState("all");
            const [limit, setLimit]     = useState(100);
            const [modal, setModal]     = useState(false);
            const [editing, setEditing] = useState(false);
            const [cur, setCur]         = useState(EMPTY);

            const filtered = useMemo(() => {
                let list = filter === "all"
                    ? db
                    : db.filter(i => i.type === filter);

                if (search) {
                    const s = search.toLowerCase();
                    list = list.filter(i =>
                        Object.values(i).some(v =>
                            v && v.toString().toLowerCase().includes(s)
                        )
                    );
                }

                return list.slice(0, limit);
            }, [db, search, filter, limit]);

            const toggleFlip = id =>
                setFlipped(p =>
                    p.includes(id)
                        ? p.filter(x => x !== id)
                        : [...p, id]
                );

            const openAdd = () => {
                setCur(EMPTY);
                setEditing(false);
                setModal(true);
            };

            const openEdit = item => {
                setCur({ ...item });
                setEditing(true);
                setModal(true);
            };

            const save = () => {
                if (!cur.kanji || !cur.combination) return;

                const item = editing
                    ? cur
                    : { ...cur, id: Date.now().toString() };

                setDb(p =>
                    editing
                        ? p.map(i => i.id === item.id ? item : i)
                        : [item, ...p]
                );

                setModal(false);
            };

            const onCnt  = db.filter(i => i.type === "on").length;
            const kunCnt = db.filter(i => i.type === "kun").length;

            return (
                <div className="app">
                    <div className="wrap">

                        {/* HEADER */}
                        <div className="hbox">
                            <div className="row" style={{ justifyContent:"space-between", marginBottom:20 }}>
                                <div className="row">
                                    <div style={{
                                        width:48, height:48, background:"#4f46e5",
                                        borderRadius:16, display:"flex",
                                        alignItems:"center", justifyContent:"center",
                                        boxShadow:"0 4px 14px rgba(79,70,229,0.35)"
                                    }}>
                                        <svg width="22" height="22" fill="none" stroke="white"
                                             strokeWidth="2.5" strokeLinecap="round"
                                             strokeLinejoin="round" viewBox="0 0 24 24">
                                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                                        </svg>
                                    </div>

                                    <div>
                                        <div style={{
                                            fontSize:18, fontWeight:900,
                                            textTransform:"uppercase",
                                            letterSpacing:"-0.02em"
                                        }}>
                                            KanjiMaster
                                        </div>

                                        <div style={{
                                            fontSize:9, fontWeight:900,
                                            color:"#818cf8", textTransform:"uppercase",
                                            letterSpacing:"0.12em"
                                        }}>
                                            More & More · {db.length} kanji
                                        </div>
                                    </div>
                                </div>

                                <div className="row" style={{ gap:8 }}>
                                    <span className="badge" style={{ background:"#fef9c3", color:"#92400e" }}>
                                        On: {onCnt}
                                    </span>

                                    <span className="badge" style={{ background:"#fee2e2", color:"#991b1b" }}>
                                        Kun: {kunCnt}
                                    </span>

                                    <button className="addbtn" onClick={openAdd}>
                                        <svg width="14" height="14" fill="none" stroke="white"
                                             strokeWidth="3" strokeLinecap="round"
                                             viewBox="0 0 24 24">
                                            <line x1="12" y1="5" x2="12" y2="19"/>
                                            <line x1="5" y1="12" x2="19" y2="12"/>
                                        </svg>
                                        Voeg Kanji Toe
                                    </button>
                                </div>
                            </div>

                            {/* SEARCH + FILTERS */}
                            <div className="row">
                                <div className="sbox">
                                    <svg width="16" height="16" fill="none" stroke="#94a3b8"
                                         strokeWidth="2.5" strokeLinecap="round"
                                         viewBox="0 0 24 24">
                                        <circle cx="11" cy="11" r="8"/>
                                        <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                                    </svg>

                                    <input
                                        placeholder="Zoek kanji, lezing, betekenis..."
                                        value={search}
                                        onChange={e => setSearch(e.target.value)}
                                    />
                                </div>

                                <div className="fgrp">
                                    <button
                                        className={"fbtn" + (filter==="all" ? " f-all" : "")}
                                        onClick={() => setFilter("all")}
                                    >
                                        Alles
                                    </button>

                                    <button
                                        className={"fbtn" + (filter==="on" ? " f-on" : "")}
                                        onClick={() => setFilter("on")}
                                    >
                                        On
                                    </button>

                                    <button
                                        className={"fbtn" + (filter==="kun" ? " f-kun" : "")}
                                        onClick={() => setFilter("kun")}
                                    >
                                        Kun
                                    </button>
                                </div>
                            </div>
                        </div>
                        {/* KAARTEN */}
                        <div className="grid">
                            {filtered.map(item => {
                                const isOn  = item.type === "on";
                                const fg    = isOn ? "#78350f" : "white";
                                const fgS   = isOn ? "#92400e" : "#fee2e2";
                                const jCol  = isOn ? "#78350f" : "white";
                                const jHref = `https://jisho.org/search/${item.kanji}`;

                                return (
                                    <div
                                        key={item.id}
                                        className="card-wrap"
                                        onClick={() => toggleFlip(item.id)}
                                    >
                                        <div className={
                                            "card-inner " +
                                            (flipped.includes(item.id) ? "flipped" : "")
                                        }>

                                            {/* FRONT */}
                                            <div
                                                className={
                                                    "card-face " +
                                                    (isOn ? "on-bg" : "kun-bg")
                                                }
                                                style={{ justifyContent:"space-between" }}
                                            >
                                                <div>
                                                    <div
                                                        style={{
                                                            display:"flex",
                                                            justifyContent:"space-between",
                                                            alignItems:"flex-start",
                                                            marginBottom:4
                                                        }}
                                                    >
                                                        <div
                                                            style={{
                                                                fontSize:64,
                                                                fontWeight:900,
                                                                color:fg
                                                            }}
                                                        >
                                                            {item.kanji}
                                                        </div>

                                                        <a
                                                            href={jHref}
                                                            target="_blank"
                                                            rel="noopener noreferrer"
                                                            className="jlink"
                                                            style={{ color:jCol }}
                                                            onClick={e => e.stopPropagation()}
                                                        >
                                                            <svg
                                                                width="11"
                                                                height="11"
                                                                fill="none"
                                                                stroke="currentColor"
                                                                strokeWidth="3"
                                                                strokeLinecap="round"
                                                                viewBox="0 0 24 24"
                                                            >
                                                                <circle cx="11" cy="11" r="8" />
                                                                <line
                                                                    x1="21"
                                                                    y1="21"
                                                                    x2="16.65"
                                                                    y2="16.65"
                                                                />
                                                            </svg>
                                                            Jisho
                                                        </a>
                                                    </div>

                                                    <div
                                                        style={{
                                                            fontSize:18,
                                                            fontWeight:900,
                                                            color:fg
                                                        }}
                                                    >
                                                        {item.meaning}
                                                    </div>
                                                </div>

                                                <div className="cacts">
                                                    <button
                                                        className="cbtn"
                                                        style={{
                                                            background:"#4f46e5",
                                                            color:"white"
                                                        }}
                                                        onClick={e => {
                                                            e.stopPropagation();
                                                            openEdit(item);
                                                        }}
                                                    >
                                                        Edit
                                                    </button>

                                                    <button
                                                        className="cbtn"
                                                        style={{
                                                            background:"#7f1d1d",
                                                            color:"white"
                                                        }}
                                                        onClick={e => {
                                                            e.stopPropagation();
                                                            setDb(db.filter(i => i.id !== item.id));
                                                        }}
                                                    >
                                                        Wis
                                                    </button>
                                                </div>
                                            </div>

                                            {/* BACK */}
                                            <div
                                                className={
                                                    "card-face card-back " +
                                                    (isOn ? "on-bg" : "kun-bg")
                                                }
                                                style={{ justifyContent:"space-between" }}
                                            >
                                                <div>
                                                    <div
                                                        style={{
                                                            display:"flex",
                                                            justifyContent:"space-between",
                                                            alignItems:"flex-start",
                                                            marginBottom:4
                                                        }}
                                                    >
                                                        <div
                                                            style={{
                                                                fontSize:28,
                                                                fontWeight:900,
                                                                color:fg
                                                            }}
                                                        >
                                                            {item.combination}
                                                        </div>

                                                        <a
                                                            href={jHref}
                                                            target="_blank"
                                                            rel="noopener noreferrer"
                                                            className="jlink"
                                                            style={{ color:jCol }}
                                                            onClick={e => e.stopPropagation()}
                                                        >
                                                            <svg
                                                                width="11"
                                                                height="11"
                                                                fill="none"
                                                                stroke="currentColor"
                                                                strokeWidth="3"
                                                                strokeLinecap="round"
                                                                viewBox="0 0 24 24"
                                                            >
                                                                <circle cx="11" cy="11" r="8" />
                                                                <line
                                                                    x1="21"
                                                                    y1="21"
                                                                    x2="16.65"
                                                                    y2="16.65"
                                                                />
                                                            </svg>
                                                            Jisho
                                                        </a>
                                                    </div>

                                                    <div
                                                        style={{
                                                            fontSize:16,
                                                            fontWeight:700,
                                                            color:fgS
                                                        }}
                                                    >
                                                        {item.combReading}
                                                    </div>

                                                    <div
                                                        style={{
                                                            fontSize:9,
                                                            fontWeight:900,
                                                            textTransform:"uppercase",
                                                            letterSpacing:"0.1em",
                                                            color:fgS,
                                                            marginBottom:12
                                                        }}
                                                    >
                                                        {item.combMeaning}
                                                    </div>

                                                    <div className="iinfo">
                                                        <div className="micro" style={{ color:fgS }}>
                                                            Lezing
                                                        </div>
                                                        <div
                                                            style={{
                                                                fontSize:18,
                                                                fontWeight:900,
                                                                color:fg
                                                            }}
                                                        >
                                                            {item.readings}
                                                        </div>
                                                    </div>

                                                    <div className="iinfo" style={{ marginBottom:0 }}>
                                                        <div className="micro" style={{ color:fgS }}>
                                                            Vertaling
                                                        </div>

                                                        <div
                                                            style={{
                                                                fontSize:12,
                                                                fontWeight:700,
                                                                color:fg,
                                                                marginBottom:2
                                                            }}
                                                        >
                                                            {item.sentence}
                                                        </div>

                                                        <div
                                                            style={{
                                                                fontSize:11,
                                                                color:fgS,
                                                                marginBottom:2
                                                            }}
                                                        >
                                                            {item.romaji}
                                                        </div>

                                                        <div
                                                            style={{
                                                                fontSize:11,
                                                                color:fgS,
                                                                fontStyle:"italic"
                                                            }}
                                                        >
                                                            {item.translation}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                );
                            })}
                        </div>

                        {filtered.length === 0 && (
                            <div className="empty">Geen kanji gevonden</div>
                        )}
                        {/* MODAL */}
                        {modal && (
                            <div className="overlay">
                                <div className="modal">
                                    <div
                                        style={{
                                            fontSize: 20,
                                            fontWeight: 900,
                                            textTransform: "uppercase",
                                            color: "#4f46e5",
                                            textAlign: "center",
                                            marginBottom: 24
                                        }}
                                    >
                                        {editing ? "Kaart Bewerken" : "Nieuwe Kanji"}
                                    </div>

                                    {/* TYPE SELECTIE */}
                                    <div style={{ display: "flex", gap: 12, marginBottom: 24 }}>
                                        <button
                                            className={"tbtn" + (cur.type === "on" ? " son" : "")}
                                            onClick={() => setCur({ ...cur, type: "on" })}
                                        >
                                            <div
                                                style={{
                                                    width: 14,
                                                    height: 14,
                                                    borderRadius: 99,
                                                    background: "#fddf47"
                                                }}
                                            />
                                            <span
                                                style={{
                                                    fontSize: 9,
                                                    fontWeight: 900,
                                                    textTransform: "uppercase",
                                                    color: "#92400e"
                                                }}
                                            >
                                                On
                                            </span>
                                        </button>

                                        <button
                                            className={"tbtn" + (cur.type === "kun" ? " skun" : "")}
                                            onClick={() => setCur({ ...cur, type: "kun" })}
                                        >
                                            <div
                                                style={{
                                                    width: 14,
                                                    height: 14,
                                                    borderRadius: 99,
                                                    background: "#ef4444"
                                                }}
                                            />
                                            <span
                                                style={{
                                                    fontSize: 9,
                                                    fontWeight: 900,
                                                    textTransform: "uppercase",
                                                    color: "white"
                                                }}
                                            >
                                                Kun
                                            </span>
                                        </button>
                                    </div>

                                    {/* FORM FIELDS */}
                                    <label className="lbl">Kanji</label>
                                    <input
                                        className="inp"
                                        value={cur.kanji}
                                        onChange={e => setCur({ ...cur, kanji: e.target.value })}
                                    />

                                    <label className="lbl">Betekenis</label>
                                    <input
                                        className="inp"
                                        value={cur.meaning}
                                        onChange={e => setCur({ ...cur, meaning: e.target.value })}
                                    />

                                    <label className="lbl">Lezingen</label>
                                    <input
                                        className="inp"
                                        value={cur.readings}
                                        onChange={e => setCur({ ...cur, readings: e.target.value })}
                                    />

                                    <label className="lbl">Combinatie</label>
                                    <input
                                        className="inp"
                                        value={cur.combination}
                                        onChange={e => setCur({ ...cur, combination: e.target.value })}
                                    />

                                    <label className="lbl">Combinatie Lezing</label>
                                    <input
                                        className="inp"
                                        value={cur.combReading}
                                        onChange={e => setCur({ ...cur, combReading: e.target.value })}
                                    />

                                    <label className="lbl">Combinatie Betekenis</label>
                                    <input
                                        className="inp"
                                        value={cur.combMeaning}
                                        onChange={e => setCur({ ...cur, combMeaning: e.target.value })}
                                    />

                                    <label className="lbl">Voorbeeldzin</label>
                                    <textarea
                                        className="inp"
                                        value={cur.sentence}
                                        onChange={e => setCur({ ...cur, sentence: e.target.value })}
                                    />

                                    <label className="lbl">Romaji</label>
                                    <input
                                        className="inp"
                                        value={cur.romaji}
                                        onChange={e => setCur({ ...cur, romaji: e.target.value })}
                                    />

                                    <label className="lbl">Vertaling</label>
                                    <input
                                        className="inp"
                                        value={cur.translation}
                                        onChange={e => setCur({ ...cur, translation: e.target.value })}
                                    />

                                    {/* FOOTER BUTTONS */}
                                    <div className="mfoot">
                                        <button className="bcncl" onClick={() => setModal(false)}>
                                            Annuleer
                                        </button>

                                        <button className="bsave" onClick={save}>
                                            Opslaan
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                    </div>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
</body>
</html>
